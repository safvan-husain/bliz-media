---
import Layout from "../../layouts/Layout.astro";
import { projects } from "../../data/projects";
import ProjectDetailsContent from "../../components/projects/ProjectDetailsContent.astro";

export async function getStaticPaths() {
    return projects.map((project) => ({
        params: { slug: project.slug },
        props: { project },
    }));
}

const { project } = Astro.props;
---

<Layout title={`${project.name} | Project Details`}>
    <section class="py-20 pt-32 md:py-32">
        <div class="container mx-auto px-4">
            <div class="max-w-5xl mx-auto">
                <a
                    href="/projects"
                    class="inline-flex items-center text-sm font-medium text-[var(--color-muted-foreground)] hover:text-[var(--color-foreground)] mb-8 transition-colors opacity-0 translate-y-8 [&.animate-in]:opacity-100 [&.animate-in]:translate-y-0"
                    data-animate-on-scroll
                    style="transition-duration: 700ms; transition-timing-function: ease-out;"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="mr-2"
                    >
                        <path d="M19 12H5"></path>
                        <path d="M12 19l-7-7 7-7"></path>
                    </svg>
                    Back to Projects
                </a>

                <div
                    class="opacity-0 translate-y-8 transition-all duration-700 ease-out [&.animate-in]:opacity-100 [&.animate-in]:translate-y-0"
                    data-animate-on-scroll
                >
                    <ProjectDetailsContent project={project} />
                </div>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const observer = new IntersectionObserver(
                (entries) => {
                    entries.forEach((entry, index) => {
                        if (entry.isIntersecting) {
                            setTimeout(() => {
                                entry.target.classList.add("animate-in");
                            }, index * 100); // Stagger by 100ms
                        }
                    });
                },
                { threshold: 0.1 },
            );

            document
                .querySelectorAll("[data-animate-on-scroll]")
                .forEach((el) => observer.observe(el));
        });
    </script>
</Layout>
